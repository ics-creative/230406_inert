<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>モーダル表示のメニュー｜inert属性のデモ</title>
  <link rel="stylesheet" href="../common.css">
  <link rel="stylesheet" href="./demo03.css">
</head>
<body>
  <header id="js-header" class="header">
    <div class="header-inner">
      <div class="header-logo">
        <p>ヘッダー</p>
      </div>
      <div class="header-mainMenuButton">
        <button id="js-mainMenu-button" class="mainMenuButton" aria-expanded="false" type="button" aria-label="メインメニューを開く">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
      <div id="js-mainMenu-menu" class="mainMenu">
        <div class="mainMenu-inner">
          <nav aria-label="メインメニュー">
            <ul class="mainMenu-navigation">
              <li><a href="#">Top</a></li>
              <li><a href="#">About</a></li>
              <li><a href="#">Works</a></li>
            </ul>
          </nav>
          <p class="mainMenu-message">ICS MEDIA<br>inert属性のデモ</p>
        </div>
      </div>
    </div>
  </header>


  <div class="layout js-mainMenu-background">
    <div class="layout-main">
      <main>
        <p>ページコンテンツ</p>
        <a class="bottomLink" href="../">目次へ戻る</a>
      </main>
    </div>
  
    <div class="layout-footer">
      <footer class="footer">
        フッター
        <nav aria-label="サブメニュー">
          <ul class="footerMenu">
            <li>
              <a href="">Top</a>
            </li>
            <li>
              <a href="">About</a>
            </li>
            <li>
              <a href="">Works</a>
            </li>
          </ul>
        </nav>
      </footer>
    </div>
  </div>

  <script>
    const header = document.querySelector("#js-header");
    const mainMenu = document.querySelector("#js-mainMenu-menu");
    const mainMenubutton = document.querySelector("#js-mainMenu-button");
    const backgroundElements = document.querySelectorAll(".js-mainMenu-background")
    // メインメニューが開かれているか？
    let isOpened = false;
    
    mainMenubutton.addEventListener("click", () => {
      isOpened = !isOpened;
      if (isOpened) {
        openMainMenu();
      } else {
        closeMainMenu();
      }
    })

    /**
     * メインメニューを開きます。
     */
    const openMainMenu = () => {
      backgroundElements.forEach((backgroundElement) => {
        backgroundElement.inert = true;
      })
      mainMenubutton.classList.add("is-opened");
      header.classList.add("is-openedMainMenu");
      mainMenubutton.ariaExpanded = true;
      mainMenubutton.ariaLabel = "メインメニューをとじる";
      mainMenu.classList.add("is-opened");
    }

    /**
     * メインメニューを閉じます。
     */
    const closeMainMenu = () => {
      backgroundElements.forEach((backSideElement) => {
        backSideElement.inert = false;
      })
      mainMenubutton.classList.remove("is-opened");
      header.classList.remove("is-openedMainMenu");
      mainMenubutton.ariaExpanded = false;
      mainMenubutton.ariaLabel = "メインメニューをひらく";
      mainMenu.classList.remove("is-opened");
    }
  </script>
</body>
</html>